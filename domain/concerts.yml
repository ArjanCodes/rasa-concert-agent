version: "3.1"

slots:
  artist:
    type: text
    mappings:
      - type: from_llm
    initial_value: null

  genre:
    type: categorical
    mappings:
      - type: from_llm
    values:
      - "rock"
      - "pop"
      - "jazz"
    initial_value: null

  date_range:
    type: text
    mappings:
      - type: from_llm
    initial_value: null

  start_date:
    type: text
    mappings:
      - type: from_llm
    initial_value: null

  end_date:
    type: text
    mappings:
      - type: from_llm
    initial_value: null

  matched_concerts:
    type: list
    mappings:
      - type: controlled
    initial_value: []

responses:

  utter_ask_artist:
    - text: "Are you looking for a specific artist?"

  utter_ask_genre:
    - text: "What type of music are you interested in? (rock, pop, jazz)"

  utter_ask_start_date:
    - text: "When would you like to go?"

  utter_ask_end_date:
    - text: "And how long are you thinking? Just that day or through when?"

  utter_no_matches_found:
    - condition: (slots.artist is not null or slots.genre is not null) and slots.date_range is not null
      text: "Unfortunately I don't see {% if artist %}{{artist}}{% elif genre and genre != 'any' %}any {{genre}} concerts{% else %}any concerts{% endif %}{% if date_range and date_range != 'any' %} for {{date_range}}{% endif %}."
      metadata:
        template: jinja
    - text: "Unfortunately I don't see any concerts matching your criteria."

actions:
  - action_find_concerts_by_genre_and_date
